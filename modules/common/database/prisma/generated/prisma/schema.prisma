generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum WorkStatus {
  DRAFT
  PLANNING
  ACTIVE
  ARCHIVED
}

model AcademicPartner {
  id            String    @id @default(uuid())
  name          String    @unique
  display_name  String?   @unique
  description   String?
  logo_url      String?
  address       String?
  programs      Program[]
  created_at    DateTime  @default(now())
  faculties     Faculty[]
  updated_at    DateTime  @updatedAt
  updated_by    User?     @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model Enterprise {
  id            String    @id @default(uuid())
  name          String
  description   String?
  note          String?
  address       String?
  programs      Program[]
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt
  updated_by    User?     @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

enum ProgramStatus {
  DRAFT
  ACTIVE
  INACTIVE
}

enum ProgramType {
  OPEN
  CUSTOM
  EXTERNAL
}

model Program {
  id                  String          @id @default(uuid())
  name                String
  description         String?
  program_key         String          @unique
  short_name          String          @default("Program")
  status              ProgramStatus   @default(DRAFT)
  type                ProgramType     @default(OPEN)
  enterprise_id       String?
  enterprise          Enterprise?     @relation(fields: [enterprise_id], references: [id])
  academic_partner_id String
  academic_partner    AcademicPartner @relation(fields: [academic_partner_id], references: [id])
  key_features        List[]
  cohorts             Cohort[]
  created_at          DateTime        @default(now())
  updated_at          DateTime        @updatedAt
  updated_by          User?           @relation(fields: [updated_by_id], references: [id])
  updated_by_id       String?

  @@unique([program_key, id])
}

model List {
  id            String   @id @default(uuid())
  name          String
  Program       Program? @relation(fields: [program_id], references: [id])
  program_id    String?
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  updated_by    User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model Cohort {
  id                           String                         @id @default(uuid())
  status                       WorkStatus                     @default(DRAFT)
  name                         String?
  description                  String?
  start_date                   DateTime?
  end_date                     DateTime?
  format                       String?
  duration                     String?
  location                     String?
  cohort_key                   String                         @unique
  cohort_num                   Int                            @default(1)
  program_id                   String
  program                      Program                        @relation(fields: [program_id], references: [id])
  max_cohort_size              Int                            @default(0)
  fees                         CohortFee[]
  created_at                   DateTime                       @default(now())
  updated_at                   DateTime                       @updatedAt
  media_section                CohortMediaSection?            @relation(fields: [media_section_id], references: [id])
  media_section_id             String?                        @unique
  microsite_section            CohortSectionMicrositeSection? @relation(fields: [microsite_section_id], references: [id])
  microsite_section_id         String?                        @unique
  overview_section             CohortOverviewSection?         @relation(fields: [overview_section_id], references: [id])
  overview_section_id          String?                        @unique
  benefits_section             CohortBenefitsSection?         @relation(fields: [benefits_section_id], references: [id])
  benefits_section_id          String?                        @unique
  curriculum_section           CohortCurriculumSection?       @relation(fields: [curriculum_section_id], references: [id])
  curriculum_section_id        String?                        @unique
  statistics_section           CohortStatisticsSection?       @relation(fields: [statistics_section_id], references: [id])
  statistics_section_id        String?                        @unique
  faculty_section              CohortFacultySection?          @relation(fields: [faculty_section_id], references: [id])
  faculty_section_id           String?                        @unique
  industry_experts_section     CohortIndustryExpertsSection?  @relation(fields: [industry_experts_section_id], references: [id])
  industry_experts_section_id  String?                        @unique
  certification_section        CohortCertificationSection?    @relation(fields: [certification_section_id], references: [id])
  certification_section_id     String?                        @unique
  testimonial_section          CohortTestimonialSection?      @relation(fields: [testimonial_section_id], references: [id])
  testimonial_section_id       String?                        @unique
  who_should_apply_section     CohortWhoShouldApplySection?   @relation(fields: [who_should_apply_section_id], references: [id])
  who_should_apply_section_id  String?                        @unique
  cohort_branding_id           String?                        @unique
  cohort_branding              CohortBranding?                @relation(fields: [cohort_branding_id], references: [id])
  design_curriculum_section    DesignCohortCurriculumSection? @relation(fields: [design_curriculum_section_id], references: [id])
  design_curriculum_section_id String?                        @unique
  generic_sections             CohortGenericSection[]
  section_order                CohortSectionOrder[]
  owner                        User?                          @relation("owner", fields: [ownerId], references: [id])
  ownerId                      String?
  updated_by                   User?                          @relation("updated_by", fields: [updated_by_id], references: [id])
  updated_by_id                String?

  @@unique([cohort_key, id])
}

model CohortBranding {
  id                    String              @id @default(uuid())
  primary_color_id      String?             @unique
  secondary_color_id    String?             @unique
  background_color_id   String?             @unique
  background_color      ContentColorsBlock? @relation("background_color", fields: [background_color_id], references: [id])
  primary_color         ContentColorsBlock? @relation("primary_color", fields: [primary_color_id], references: [id])
  secondary_color       ContentColorsBlock? @relation("secondary_color", fields: [secondary_color_id], references: [id])
  default_border_radius Int
  font_name             String?
  cohort                Cohort?
  created_at            DateTime            @default(now())
  updated_at            DateTime            @updatedAt
  updated_by            User?               @relation(fields: [updated_by_id], references: [id])
  updated_by_id         String?
}

model CohortMediaSection {
  id                      String   @id @default(uuid())
  title                   String
  description             String?
  banner_image_url        String?
  banner_image_width      Int?
  brochure_url            String?
  university_logo_url     String?
  university_logo_width   Int?
  university_banner_url   String?
  university_banner_width Int?
  is_section_visible      Boolean  @default(true)
  created_at              DateTime @default(now())
  updated_at              DateTime @updatedAt
  cohort                  Cohort?
  updated_by              User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id           String?
}

model ContentColorsBlock {
  id                                 String                 @id @default(uuid())
  background_color                   String?
  text_color                         String
  color_type                         String?                @default("hex")
  cohort_content_branding            CohortBranding?        @relation("primary_color")
  cohort_content_branding_secondary  CohortBranding?        @relation("secondary_color")
  cohort_content_branding_background CohortBranding?        @relation("background_color")
  cohort_generic_section             CohortGenericSection[]
  created_at                         DateTime               @default(now())
  updated_at                         DateTime               @updatedAt
  updated_by                         User?                  @relation(fields: [updated_by_id], references: [id])
  updated_by_id                      String?
}

enum SectionWidth {
  center
  full
}

model CohortSectionMicrositeSection {
  id                     String           @id @default(uuid())
  title                  String
  top_description        String?
  bottom_description     String?
  description            String?
  visibility_start_date  DateTime?
  visibility_end_date    DateTime?
  custom_domain          String?          @unique
  cohort_enrollment_link String?
  created_at             DateTime         @default(now())
  updated_at             DateTime         @updatedAt
  pages                  MicrositePages[]
  cohort                 Cohort?
  updated_by             User?            @relation(fields: [updated_by_id], references: [id])
  updated_by_id          String?
}

model MicrositePages {
  id             String                         @id @default(uuid())
  title          String
  slug           String                         @unique
  content        String?
  is_active      Boolean                        @default(true)
  parent_id      String?
  parent_section CohortSectionMicrositeSection? @relation(fields: [parent_id], references: [id])
  created_at     DateTime                       @default(now())
  updated_at     DateTime                       @updatedAt
  updated_by     User?                          @relation(fields: [updated_by_id], references: [id])
  updated_by_id  String?
}

model CohortOverviewSection {
  id                 String  @id @default(uuid())
  title              String
  top_description    String?
  bottom_description String?
  description        String?
  is_section_visible Boolean @default(true)

  section_width SectionWidth? @default(center)
  created_at    DateTime      @default(now())
  updated_at    DateTime      @updatedAt
  cohort        Cohort?
  updated_by    User?         @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model CohortBenefitsSection {
  id                 String        @id @default(uuid())
  title              String
  top_description    String?
  bottom_description String?
  section_width      SectionWidth? @default(center)
  is_section_visible Boolean       @default(true)

  benefits_items CohortBenefitsItem[]
  created_at     DateTime             @default(now())
  updated_at     DateTime             @updatedAt
  cohort         Cohort?
  updated_by     User?                @relation(fields: [updated_by_id], references: [id])
  updated_by_id  String?
}

model CohortBenefitsItem {
  id                 String                @id @default(uuid())
  title              String
  description        String?
  top_description    String?
  bottom_description String?
  icon_image_url     String?
  parent_section_id  String
  parent_section     CohortBenefitsSection @relation(fields: [parent_section_id], references: [id])
  created_at         DateTime              @default(now())
  updated_at         DateTime              @updatedAt
  updated_by         User?                 @relation(fields: [updated_by_id], references: [id])
  updated_by_id      String?
}

model CohortCurriculumSection {
  id                 String                 @id @default(uuid())
  title              String
  top_description    String?
  bottom_description String?
  section_width      SectionWidth?          @default(center)
  items              CohortCurriculumItem[]
  is_section_visible Boolean                @default(true)

  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  cohort        Cohort?
  updated_by    User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model CohortCurriculumItem {
  id                String                  @id @default(uuid())
  title             String
  description       String?
  parent_section_id String
  parent_section    CohortCurriculumSection @relation(fields: [parent_section_id], references: [id])
  created_at        DateTime                @default(now())
  updated_at        DateTime                @updatedAt
  updated_by        User?                   @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?
}

model DesignCohortCurriculumSection {
  id                 String                              @id @default(uuid())
  title              String
  overview           String?
  top_description    String?
  bottom_description String?
  items              DesignCohortCurriculumSectionItem[]
  is_section_visible Boolean                             @default(true)

  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  cohort        Cohort?
  updated_by    User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model DesignCohortCurriculumSectionItem {
  id                String                            @id @default(uuid())
  title             String
  overview          String?
  objectives        DesignCohortCurriculumObjective[]
  sessions          DesignCohortCurriculumSession[]
  parent_section_id String
  parent_section    DesignCohortCurriculumSection     @relation(fields: [parent_section_id], references: [id])
  position          Int                               @default(0)
  created_at        DateTime                          @default(now())
  updated_at        DateTime                          @updatedAt
  updated_by        User?                             @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?
}

model DesignCohortCurriculumObjective {
  id                              String                             @id @default(uuid())
  description                     String
  parent_section_id               String?
  parent_section                  DesignCohortCurriculumSectionItem? @relation(fields: [parent_section_id], references: [id])
  position                        Int                                @default(0)
  created_at                      DateTime                           @default(now())
  updated_at                      DateTime                           @updatedAt
  DesignCohortCurriculumSession   DesignCohortCurriculumSession?     @relation(fields: [designCohortCurriculumSessionId], references: [id])
  designCohortCurriculumSessionId String?
  updated_by                      User?                              @relation(fields: [updated_by_id], references: [id])
  updated_by_id                   String?
}

model DesignCohortCurriculumSession {
  id                String                             @id @default(uuid())
  title             String
  overview          String?
  position          Int                                @default(0)
  objectives        DesignCohortCurriculumObjective[]
  created_at        DateTime                           @default(now())
  updated_at        DateTime                           @updatedAt
  parent_section    DesignCohortCurriculumSectionItem? @relation(fields: [parent_section_id], references: [id])
  parent_section_id String?
  updated_by        User?                              @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?
}

model CohortStatisticsSection {
  id                      String                              @id @default(uuid())
  title                   String
  top_description         String?
  bottom_description      String?
  work_experience_item_id String?                             @unique
  industry_item_id        String?                             @unique
  designation_item_id     String?                             @unique
  company_item_id         String?                             @unique
  is_section_visible      Boolean                             @default(true)
  work_experience_item    CohortStatisticsWorkExperienceItem? @relation(fields: [work_experience_item_id], references: [id])
  industry_item           CohortStatisticsIndustryItem?       @relation(fields: [industry_item_id], references: [id])
  designation_item        CohortStatisticsDesignationItem?    @relation(fields: [designation_item_id], references: [id])
  company_item            CohortStatisticsCompanyItem?        @relation(fields: [company_item_id], references: [id])
  section_width           SectionWidth?                       @default(center)
  created_at              DateTime                            @default(now())
  updated_at              DateTime                            @updatedAt
  cohort                  Cohort?
  updated_by              User?                               @relation(fields: [updated_by_id], references: [id])
  updated_by_id           String?
}

model CohortStatisticsWorkExperienceItem {
  id              String                   @id @default(uuid())
  title           String
  description     String?
  chart_image_url String?
  parent_section  CohortStatisticsSection?
  created_at      DateTime                 @default(now())
  updated_at      DateTime                 @updatedAt
  updated_by      User?                    @relation(fields: [updated_by_id], references: [id])
  updated_by_id   String?
}

model CohortStatisticsIndustryItem {
  id             String                   @id @default(uuid())
  title          String
  description    String?
  data_list_id   String
  data_list      ContentListBlock         @relation(fields: [data_list_id], references: [id])
  parent_section CohortStatisticsSection?
  created_at     DateTime                 @default(now())
  updated_at     DateTime                 @updatedAt
  updated_by     User?                    @relation(fields: [updated_by_id], references: [id])
  updated_by_id  String?
}

model CohortStatisticsDesignationItem {
  id             String                   @id @default(uuid())
  title          String
  description    String?
  data_list_id   String
  data_list      ContentListBlock         @relation(fields: [data_list_id], references: [id])
  parent_section CohortStatisticsSection?
  created_at     DateTime                 @default(now())
  updated_at     DateTime                 @updatedAt
  updated_by     User?                    @relation(fields: [updated_by_id], references: [id])
  updated_by_id  String?
}

model CohortStatisticsCompanyItem {
  id                 String                   @id @default(uuid())
  title              String
  top_description    String?
  bottom_description String?
  section_width      SectionWidth?            @default(center)
  image_url          String?
  parent_section     CohortStatisticsSection?
  created_at         DateTime                 @default(now())
  updated_at         DateTime                 @updatedAt
  updated_by         User?                    @relation(fields: [updated_by_id], references: [id])
  updated_by_id      String?
}

model CohortFacultySection {
  id                 String        @id @default(uuid())
  title              String
  top_description    String?
  bottom_description String?
  section_width      SectionWidth? @default(center)
  is_section_visible Boolean       @default(true)

  items         CohortFacultySectionItem[]
  created_at    DateTime                   @default(now())
  updated_at    DateTime                   @updatedAt
  cohort        Cohort?
  updated_by    User?                      @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model CohortFacultySectionItem {
  id                String               @id @default(uuid())
  position          Int
  faculty           Faculty              @relation(fields: [facultyId], references: [id])
  facultyId         String
  parent_section_id String
  parent_section    CohortFacultySection @relation(fields: [parent_section_id], references: [id])
  created_at        DateTime             @default(now())
  updated_at        DateTime             @updatedAt
  updated_by        User?                @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?

  @@unique([facultyId, parent_section_id])
}

model CohortIndustryExpertsSection {
  id                 String                             @id @default(uuid())
  title              String
  top_description    String?
  bottom_description String?
  section_width      SectionWidth?                      @default(center)
  items              CohortIndustryExpertsSectionItem[]
  is_section_visible Boolean                            @default(true)

  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  cohort        Cohort?
  updated_by    User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model CohortIndustryExpertsSectionItem {
  id                String                       @id @default(uuid())
  position          Int
  faculty           Faculty                      @relation(fields: [facultyId], references: [id])
  facultyId         String
  parent_section_id String
  parent_section    CohortIndustryExpertsSection @relation(fields: [parent_section_id], references: [id])
  created_at        DateTime                     @default(now())
  updated_at        DateTime                     @updatedAt
  updated_by        User?                        @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?
}

model CohortCertificationSection {
  id                    String   @id @default(uuid())
  title                 String
  top_description       String?
  bottom_description    String?
  certificate_image_url String?
  is_section_visible    Boolean  @default(true)
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt
  cohort                Cohort?
  updated_by            User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id         String?
}

model CohortTestimonialSection {
  id                 String  @id @default(uuid())
  title              String
  description        String?
  top_description    String?
  bottom_description String?
  is_section_visible Boolean @default(true)

  section_width SectionWidth?           @default(center)
  items         CohortTestimonialItem[]
  cohort        Cohort?
  created_at    DateTime                @default(now())
  updated_at    DateTime                @updatedAt
  updated_by    User?                   @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model CohortTestimonialItem {
  id                String                   @id @default(uuid())
  title             String
  quote             String
  user_image_url    String?
  user_name         String
  user_designation  String
  user_company      String
  parent_section_id String
  position          Int
  parent_section    CohortTestimonialSection @relation(fields: [parent_section_id], references: [id])
  created_at        DateTime                 @default(now())
  updated_at        DateTime                 @updatedAt
  updated_by        User?                    @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?
}

model CohortWhoShouldApplySection {
  id                 String        @id @default(uuid())
  title              String
  description        String?
  top_description    String?
  bottom_description String?
  section_width      SectionWidth? @default(center)
  is_section_visible Boolean       @default(true)

  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  cohort        Cohort?
  updated_by    User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

enum BannerImagePosition {
  top
  bottom
  center
  left
  right
}

model CohortGenericSection {
  id                    String              @id @default(uuid())
  title                 String
  description           String?
  top_description       String?
  banner_image_url      String?
  banner_image_position BannerImagePosition @default(left)
  bottom_description    String?
  is_section_visible    Boolean             @default(true)
  background            ContentColorsBlock? @relation(fields: [background_id], references: [id])
  background_id         String?
  created_at            DateTime            @default(now())
  updated_at            DateTime            @updatedAt
  cohort                Cohort?             @relation(fields: [cohort_id], references: [id])
  cohort_id             String?
  updated_by            User?               @relation(fields: [updated_by_id], references: [id])
  updated_by_id         String?
}

enum CohortSectionType {
  overview_section
  benefits_section
  design_curriculum_section
  faculty_section
  industry_experts_section
  statistics_section
  certification_section
  testimonial_section
  who_should_apply_section
  custom_section
}

model CohortSectionOrder {
  id               String            @id @default(uuid())
  section_type     CohortSectionType
  section_position Int
  section_id       String
  cohort           Cohort            @relation(fields: [cohort_id], references: [id])
  cohort_id        String
  created_at       DateTime          @default(now())
  updated_at       DateTime          @updatedAt
  updated_by       User?             @relation(fields: [updated_by_id], references: [id])
  updated_by_id    String?

  @@unique([cohort_id, section_type, section_id])
}

enum ContentActionBlockType {
  primary
  secondary
  link
}

model ContentActionBlock {
  id            String                 @id @default(uuid())
  title         String
  url           String
  text          String
  target        ContentActionBlockType @default(primary)
  created_at    DateTime               @default(now())
  updated_at    DateTime               @updatedAt
  updated_by    User?                  @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model ContentListBlock {
  id                              String                            @id @default(uuid())
  title                           String
  description                     String?
  items                           ContentListItem[]
  created_at                      DateTime                          @default(now())
  updated_at                      DateTime                          @updatedAt
  CohortStatisticsIndustryItem    CohortStatisticsIndustryItem[]
  CohortStatisticsDesignationItem CohortStatisticsDesignationItem[]
  updated_by                      User?                             @relation(fields: [updated_by_id], references: [id])
  updated_by_id                   String?
}

model ContentListItem {
  id                 String            @id @default(uuid())
  title              String
  description        String?
  created_at         DateTime          @default(now())
  updated_at         DateTime          @updatedAt
  ContentListBlock   ContentListBlock? @relation(fields: [contentListBlockId], references: [id])
  contentListBlockId String?
  updated_by         User?             @relation(fields: [updated_by_id], references: [id])
  updated_by_id      String?
}

model CohortFee {
  id            String   @id @default(uuid())
  amount        Int
  cohorts       Cohort[]
  currency_id   String
  currency      Currency @relation(fields: [currency_id], references: [id])
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  updated_by    User?    @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

model Currency {
  id            String      @id @default(uuid())
  name          String
  symbol        String
  code          String      @unique
  CohortFee     CohortFee[]
  created_at    DateTime    @default(now())
  updated_at    DateTime    @updatedAt
  updated_by    User?       @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

enum FacultyType {
  PROFESSOR_TIER_1
  PROFESSOR_TIER_2
  PROFESSOR_TIER_3
  COACH
  SUCCESS_COACH
}

model FacultySubjectArea {
  id                String                  @id @default(uuid())
  name              String                  @unique
  description       String?
  sub_subject_areas FacultySubSubjectArea[]
  faculty           Faculty[]
  created_at        DateTime                @default(now())
  updated_at        DateTime                @updatedAt
  updated_by        User?                   @relation(fields: [updated_by_id], references: [id])
  updated_by_id     String?
}

model FacultySubSubjectArea {
  id              String             @id @default(uuid())
  name            String             @unique
  description     String?
  subject_area_id String
  subject_area    FacultySubjectArea @relation(fields: [subject_area_id], references: [id])
  faculty         Faculty[]
  created_at      DateTime           @default(now())
  updated_at      DateTime           @updatedAt
  updated_by      User?              @relation(fields: [updated_by_id], references: [id])
  updated_by_id   String?
}

model Faculty {
  id                                    String                             @id @default(uuid())
  name                                  String
  preferred_name                        String?
  title                                 String?
  email                                 String
  phone                                 String
  description                           String?
  note                                  String?
  profile_image                         String?
  academic_partner_id                   String?
  academic_partner                      AcademicPartner?                   @relation(fields: [academic_partner_id], references: [id])
  faculty_subject_areas                 FacultySubSubjectArea[]
  created_at                            DateTime                           @default(now())
  updated_at                            DateTime                           @updatedAt
  faculty_type                          FacultyType                        @default(PROFESSOR_TIER_1)
  faculty_code_id                       String?
  faculty_code                          FacultyCode?                       @relation(fields: [faculty_code_id], references: [id])
  cohort_faculty_section_items          CohortFacultySectionItem[]
  cohort_industry_experts_section_items CohortIndustryExpertsSectionItem[]
  faculty_subject_area                  FacultySubjectArea?                @relation(fields: [facultySubjectAreaId], references: [id])
  facultySubjectAreaId                  String?
  updated_by                            User?                              @relation(fields: [updated_by_id], references: [id])
  updated_by_id                         String?
}

model FacultyCode {
  id            String    @id @default(uuid())
  name          String    @unique
  description   String?
  Faculty       Faculty[]
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt
  updated_by    User?     @relation(fields: [updated_by_id], references: [id])
  updated_by_id String?
}

enum Role {
  Admin
  User
}

model UserRole {
  id         String   @id @default(uuid())
  role       Role     @default(User)
  users      User[]
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

model User {
  id              String          @id @default(cuid())
  name            String?
  email           String?         @unique
  username        String?         @unique
  emailVerified   DateTime?
  image           String?
  accounts        Account[]
  sessions        Session[]
  roles           UserRole[]
  // Optional for WebAuthn support
  Authenticator   Authenticator[]
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
  cohorts_owned   Cohort[]        @relation("owner")
  cohorts_updated Cohort[]        @relation("updated_by")

  faculties_updated                              Faculty[]
  academic_partners_updated                      AcademicPartner[]
  enterprises_updated                            Enterprise[]
  program_updated                                Program[]
  list_updated                                   List[]
  cohort_branding_updated                        CohortBranding[]
  cohort_media_section_updated                   CohortMediaSection[]
  content_colors_block_updated                   ContentColorsBlock[]
  cohort_section_microsite_section_updated       CohortSectionMicrositeSection[]
  microsite_pages_updated                        MicrositePages[]
  cohort_overview_section_updated                CohortOverviewSection[]
  cohort_benefits_section_updated                CohortBenefitsSection[]
  cohort_benefits_item_updated                   CohortBenefitsItem[]
  cohort_curriculum_section_updated              CohortCurriculumSection[]
  cohort_curriculum_item_updated                 CohortCurriculumItem[]
  design_cohort_curriculum_section_updated       DesignCohortCurriculumSection[]
  design_cohort_curriculum_section_item_updated  DesignCohortCurriculumSectionItem[]
  design_cohort_curriculum_objective_updated     DesignCohortCurriculumObjective[]
  design_cohort_curriculum_session_updated       DesignCohortCurriculumSession[]
  cohort_statistics_section_updated              CohortStatisticsSection[]
  cohort_statistics_work_experience_item_updated CohortStatisticsWorkExperienceItem[]
  cohort_statistics_industry_item_updated        CohortStatisticsIndustryItem[]
  cohort_statistics_designation_item_updated     CohortStatisticsDesignationItem[]
  CohortStatisticsCompanyItem                    CohortStatisticsCompanyItem[]
  cohort_faculty_section_updated                 CohortFacultySection[]
  cohort_faculty_section_item_updated            CohortFacultySectionItem[]
  cohort_industry_experts_section_updated        CohortIndustryExpertsSection[]
  cohort_industry_experts_section_item_updated   CohortIndustryExpertsSectionItem[]
  cohort_certification_section_updated           CohortCertificationSection[]
  cohort_testimonial_section_updated             CohortTestimonialSection[]
  cohort_testimonial_item_updated                CohortTestimonialItem[]
  cohort_who_should_apply_section_updated        CohortWhoShouldApplySection[]
  content_action_block_updated                   ContentActionBlock[]
  content_list_block_updated                     ContentListBlock[]
  content_list_item_updated                      ContentListItem[]
  cohort_fee_updated                             CohortFee[]
  currency_updated                               Currency[]
  faculty_subject_area_updated                   FacultySubjectArea[]
  faculty_sub_subject_area_updated               FacultySubSubjectArea[]
  faculty_code_updated                           FacultyCode[]
  cohort_generic_section_updated                 CohortGenericSection[]
  cohort_section_order_updated                   CohortSectionOrder[]
}

model Account {
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([provider, providerAccountId])
}

model Session {
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime

  @@id([identifier, token])
}

// Optional for WebAuthn support
model Authenticator {
  credentialID         String  @unique
  userId               String
  providerAccountId    String
  credentialPublicKey  String
  counter              Int
  credentialDeviceType String
  credentialBackedUp   Boolean
  transports           String?
  user                 User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([userId, credentialID])
}
